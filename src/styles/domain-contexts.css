/**
 * Domain Context Layouts
 * Mission BI-20251020-1610a
 *
 * Context-aware grid scaffolds powered exclusively by semantic tokens.
 * No literal spacing/colour values; all sizing comes from view/system tokens.
 */

@layer components {
  /* Base container */
  [data-view] {
    background: var(--cmp-surface-canvas);
    color: var(--cmp-text-body);
    padding-inline: var(--view-shell-padding-inline);
    padding-block: var(--view-shell-padding-block);
    display: grid;
    justify-items: center;
    width: 100%;
    box-sizing: border-box;
  }

  [data-view] > * {
    width: var(--view-shell-max-width);
    box-sizing: border-box;
  }

  /* Page header */
  [data-view] header[data-region='pageHeader'] {
    display: grid;
    gap: var(--view-pageHeader-gap);
  }

  [data-view] header[data-region='pageHeader'] header {
    background: var(--cmp-surface-panel);
    border-radius: var(--view-card-radius);
    padding: var(--view-card-padding);
    box-shadow: var(--cmp-shadow-panel);
    border: var(--view-border-thin) solid var(--cmp-border-default);
    display: grid;
    gap: var(--view-pageHeader-card-gap);
  }

  /* Toolbar */
  [data-view] [data-region='viewToolbar'] {
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: var(--view-toolbar-gap);
  }

  [data-view] [data-region='viewToolbar'] > * {
    display: inline-flex;
    align-items: center;
    gap: var(--view-toolbar-item-gap);
  }

  /* Main content */
  [data-view] main[data-region='main'] {
    display: grid;
    gap: var(--view-main-gap-default);
  }

  [data-view='list'] main[data-region='main'] {
    gap: var(--view-main-gap-list);
  }

  [data-view='inline'] main[data-region='main'] {
    gap: var(--view-main-gap-inline);
  }

  [data-view] main[data-region='main'] > *,
  [data-view] main[data-region='main'] > * > * {
    background: var(--cmp-surface-panel);
    border-radius: var(--view-card-radius);
    padding: var(--view-card-padding);
    box-shadow: var(--cmp-shadow-panel);
    border: var(--view-border-thin) solid var(--cmp-border-default);
  }

  /* Context rail */
  [data-view] aside[data-region='contextPanel'] {
    background: var(--cmp-surface-panel);
    border-radius: var(--view-card-radius);
    padding: var(--view-contextPanel-padding);
    box-shadow: var(--cmp-shadow-panel);
    border: var(--view-border-thin) solid var(--cmp-border-default);
    display: grid;
    gap: var(--view-contextPanel-gap);
  }

  /* Detail view */
  [data-view='detail'] [data-region-group='detail-body'] {
    display: grid;
    gap: var(--view-section-gap-detail);
  }

  [data-view='detail'] [data-region-group='detail-content'] {
    display: grid;
    align-items: start;
    gap: var(--view-card-gap);
    grid-template-columns: var(--view-columns-default);
  }

  [data-view='detail'][data-view-has-contextpanel='true'] [data-region-group='detail-content'] {
    grid-template-columns: var(--view-columns-two-column-standard);
  }

  /* List view */
  [data-view='list'] [data-region-group='list-body'] {
    display: grid;
    gap: var(--view-section-gap-list);
  }

  [data-view='list'] [data-region-group='list-content'] {
    display: grid;
    gap: var(--view-card-gap);
    align-items: start;
    grid-template-columns: var(--view-columns-default);
  }

  [data-view='list'][data-view-has-contextpanel='true'] [data-region-group='list-content'] {
    grid-template-columns: var(--view-columns-two-column-narrow);
  }

  /* Form view */
  [data-view='form'] [data-region-group='form-body'] {
    display: grid;
    gap: var(--view-section-gap-form);
  }

  [data-view='form'] [data-region-group='form-content'] {
    display: grid;
    gap: var(--view-card-gap);
    align-items: start;
    grid-template-columns: var(--view-columns-default);
  }

  [data-view='form'][data-view-has-contextpanel='true'] [data-region-group='form-content'] {
    grid-template-columns: var(--view-columns-two-column-guidance);
  }

  /* Timeline view */
  [data-view='timeline'] {
    background: var(--view-timeline-background);
  }

  [data-view='timeline'] [data-region-group='timeline-body'] {
    display: grid;
    gap: var(--view-section-gap-timeline);
  }

  [data-view='timeline'] [data-region-group='timeline-meta'] {
    display: grid;
    gap: var(--view-timeline-gap);
  }

  [data-view='timeline'] [data-region-group='timeline-stream'] {
    display: grid;
    gap: var(--view-timeline-stream-gap);
  }

  /* Inline view */
  [data-view='inline'] {
    display: grid;
    gap: var(--view-gap-inline);
  }

  [data-view='inline'] [data-region-group='inline-header-row'] {
    display: grid;
    gap: var(--view-gap-inline);
  }

  /* Card view */
  [data-view='card'] {
    background: var(--cmp-surface-panel);
    border-radius: var(--view-card-radius);
    padding: var(--view-card-padding);
    box-shadow: var(--cmp-shadow-panel);
    border: var(--view-border-thin) solid var(--cmp-border-default);
    display: grid;
    gap: var(--view-card-gap);
    max-width: var(--view-card-max-width);
    margin-inline: auto;
  }

  [data-view='card'] main[data-region='main'] > *,
  [data-view='card'] aside[data-region='contextPanel'] {
    border: none;
    padding: 0;
    box-shadow: none;
    background: transparent;
  }

  /* Forced colours compatibility */
  @media (forced-colors: active) {
    [data-view] {
      border: var(--view-border-thin) solid CanvasText;
      forced-color-adjust: none;
    }

    [data-view] [data-region='viewToolbar'] {
      border: var(--view-border-thin) solid ButtonBorder;
      padding: var(--cmp-spacing-inset-compact);
    }

    [data-view] main[data-region='main'] > *,
    [data-view] main[data-region='main'] > * > *,
    [data-view] aside[data-region='contextPanel'],
    [data-view] header[data-region='pageHeader'] header {
      border: var(--view-border-medium) solid CanvasText;
      box-shadow: none;
      background: Canvas;
      forced-color-adjust: none;
    }

    [data-view='card'] {
      border: var(--view-border-strong) solid CanvasText;
      box-shadow: none;
      background: Canvas;
    }

    [data-view] *:focus {
      outline: var(--cmp-focus-width) solid Highlight;
      outline-offset: var(--view-focus-outline-offset);
      forced-color-adjust: none;
    }

    [data-view] [data-region-group] {
      border: var(--view-border-thin) solid ButtonBorder;
      padding: var(--cmp-spacing-inset-compact);
    }
  }
}
